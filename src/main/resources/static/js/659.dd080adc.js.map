{"version":3,"file":"js/659.dd080adc.js","mappings":"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","sources":["webpack://app/./src/views/Home/PostDetails/index.vue","webpack://app/src/views/Home/PostDetails/index.vue","webpack://app/./src/views/Home/PostDetails/index.vue?3a22","webpack://app/./src/views/Home/PostDetails/index.vue?0780"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-sticky',[_c('van-nav-bar',{staticStyle:{\"border-bottom\":\"0.5px solid rgb(203, 203, 203)\"},attrs:{\"title\":'@' + _vm.postDetails.postNick,\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('div',{staticClass:\"attention\"},[_c('button',[_vm._v(\"关注\")])])]},proxy:true}])})],1),_c('div',{ref:\"postDetailsTop\",staticClass:\"post\"},[_c('div',{staticClass:\"userDetails\"},[_c('div',{staticClass:\"touxiang\"},[_c('van-image',{attrs:{\"round\":\"\",\"src\":\"https://img01.yzcdn.cn/vant/cat.jpeg\"}})],1),_c('div',{staticClass:\"info\"},[_c('p',[_vm._v(_vm._s(_vm.postDetails.postNick))]),_c('p',{staticClass:\"little\"},[_vm._v(\" \"+_vm._s(_vm.postDetails.postDate)+\" · \"+_vm._s(_vm.postDetails.postReadcount)+\"次浏览 \")])]),_c('div',[_vm._v(\"…\")])]),_c('div',{staticClass:\"content\"},[_vm._v(\" \"+_vm._s(_vm.postDetails.postContent)+\" \")])]),_c('div',{staticClass:\"postComment\"},[_c('p',{staticStyle:{\"text-align\":\"left\",\"padding\":\"10px 0px 10px 10px\"}},[_vm._v(\"评论\")]),_vm._l((_vm.commentList),function(comment){return _c('div',{key:comment.commentId,staticClass:\"commentItem\"},[_c('div',{staticClass:\"touxiang\"},[_c('van-image',{attrs:{\"round\":\"\",\"src\":\"https://img01.yzcdn.cn/vant/cat.jpeg\"}})],1),_c('div',{staticClass:\"comment\"},[_c('div',{staticClass:\"info\"},[_vm._v(\" \"+_vm._s(comment.userNick)+\"   ·   \"+_vm._s(comment.commentDate)+\" \")]),_c('div',{staticClass:\"txt\"},[_vm._v(_vm._s(comment.commentContent))])])])}),_c('div',{staticClass:\"writeComment\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.MyComment),expression:\"MyComment\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.MyComment)},on:{\"input\":function($event){if($event.target.composing)return;_vm.MyComment=$event.target.value}}}),_c('span',{staticClass:\"put\",on:{\"click\":_vm.putMyComment}},[_vm._v(\"发布\")]),_c('span',{staticClass:\"userLike\"},[_c('van-icon',{attrs:{\"name\":\"thumb-circle-o\"}}),_vm._v(\"  \"+_vm._s(_vm.postDetails.postLike)+\" \")],1)])],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 粘滞组件 -->\r\n    <van-sticky>\r\n      <van-nav-bar\r\n        :title=\"'@' + postDetails.postNick\"\r\n        left-text=\"返回\"\r\n        left-arrow\r\n        @click-left=\"onClickLeft\"\r\n        style=\"border-bottom: 0.5px solid rgb(203, 203, 203)\"\r\n      >\r\n        <template #right>\r\n          <div class=\"attention\">\r\n            <button>关注</button>\r\n          </div>\r\n        </template>\r\n      </van-nav-bar>\r\n    </van-sticky>\r\n    <div ref=\"postDetailsTop\" class=\"post\">\r\n      <div class=\"userDetails\">\r\n        <div class=\"touxiang\">\r\n          <van-image round src=\"https://img01.yzcdn.cn/vant/cat.jpeg\" />\r\n        </div>\r\n        <div class=\"info\">\r\n          <p>{{ postDetails.postNick }}</p>\r\n          <p class=\"little\">\r\n            {{ postDetails.postDate }}&nbsp;·&nbsp;{{\r\n              postDetails.postReadcount\r\n            }}次浏览\r\n          </p>\r\n        </div>\r\n        <div>…</div>\r\n      </div>\r\n      <div class=\"content\">\r\n        {{ postDetails.postContent }}\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"postComment\">\r\n      <p style=\"text-align: left; padding: 10px 0px 10px 10px\">评论</p>\r\n      <!-- {{ postDetails.postComment }} -->\r\n      <div class=\"commentItem\" v-for=\"comment in commentList\" :key=\"comment.commentId\">\r\n        <div class=\"touxiang\">\r\n          <van-image round src=\"https://img01.yzcdn.cn/vant/cat.jpeg\" />\r\n        </div>\r\n        <div class=\"comment\">\r\n          <div class=\"info\"> {{ comment.userNick }} &nbsp;&nbsp;·&nbsp;&nbsp; {{ comment.commentDate }} </div>\r\n          <div class=\"txt\">{{ comment.commentContent }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"writeComment\">\r\n        <input type=\"text\" v-model=\"MyComment\" />\r\n        <span class=\"put\" @click=\"putMyComment\">发布</span>\r\n        <span class=\"userLike\">\r\n          <van-icon name=\"thumb-circle-o\" /> &nbsp;{{ postDetails.postLike }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  queryPostByPostId,\r\n  putPostComment,\r\n  tokenCheckout,\r\n  getComment,\r\n  addComment\r\n} from \"@/api\";\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  name: \"PostDetails\",\r\n  data() {\r\n    return {\r\n      postDetails: \"\",\r\n      MyComment: \"\",\r\n      commentList:[]\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"token\", \"userAccount\"]),\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n    onClickRight() {\r\n      console.log(\"关注\");\r\n    },\r\n    // 评论\r\n    putMyComment() {\r\n      // 发送评论，先验证token，再把账号和评论和帖子id发送\r\n      tokenCheckout(this.token).then(\r\n        (res) => {\r\n          putPostComment({\r\n            userAccount: this.userAccount,\r\n            MyComment: this.MyComment,\r\n            postId: this.postDetails.postId,\r\n            date: this.getDate(),\r\n            reply: 0,\r\n          }).then(\r\n            (res) => {\r\n              this.refreshComment()\r\n              this.$toast.success(\"评论成功\");\r\n              this.MyComment = '';\r\n              // 增加一个评论数\r\n              addComment(this.postDetails.postId);\r\n            },\r\n            (reason) => {\r\n              this.$toast.fail(\"服务器异常\");\r\n            }\r\n          );\r\n        },\r\n        (reason) => {\r\n          this.$toast.fail(\"服务器异常\");\r\n        }\r\n      );\r\n    },\r\n    // 获取当前时间\r\n    getDate() {\r\n      let _this = this;\r\n      let year = new Date().getFullYear(); //获取当前时间的年份\r\n      let month = new Date().getMonth() + 1; //获取当前时间的月份\r\n      let day = new Date().getDate(); //获取当前时间的天数\r\n      let hours = new Date().getHours(); //获取当前时间的小时\r\n      let minutes = new Date().getMinutes(); //获取当前时间的分数\r\n      let seconds = new Date().getSeconds(); //获取当前时间的秒数\r\n      //当小于 10 的是时候，在前面加 0\r\n      if (hours < 10) {\r\n        hours = \"0\" + hours;\r\n      }\r\n      if (minutes < 10) {\r\n        minutes = \"0\" + minutes;\r\n      }\r\n      if (seconds < 10) {\r\n        seconds = \"0\" + seconds;\r\n      }\r\n      //拼接格式化当前时间\r\n      let datetime =\r\n        year +\r\n        \"-\" +\r\n        month +\r\n        \"-\" +\r\n        day +\r\n        \" \" +\r\n        hours +\r\n        \":\" +\r\n        minutes +\r\n        \":\" +\r\n        seconds;\r\n      return datetime;\r\n    },\r\n    // 刷新评论\r\n    async refreshComment(){\r\n      // 根据帖子id查询评论\r\n      await getComment(this.postDetails.postId).then(res=>{\r\n        this.commentList = res.reverse()\r\n      },reason=>{\r\n        this.$toast.fail(\"服务器异常\");\r\n      })\r\n    }\r\n  },\r\n   async mounted() {\r\n    // 根据帖子id查询该帖子\r\n    let postId = this.$route.query.postId;\r\n    await queryPostByPostId(postId).then((res) => {\r\n      this.postDetails = res;\r\n    });\r\n    this.refreshComment()\r\n  },\r\n  components: {},\r\n};\r\n</script>\r\n\r\n<style>\r\n.post {\r\n  width: 100%;\r\n  background-color: #fff;\r\n  font-size: 16px;\r\n}\r\n.post .userDetails {\r\n  padding: 10px 0px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n}\r\n.post .userDetails .touxiang {\r\n  width: 10px;\r\n}\r\n.post .userDetails .van-image {\r\n  width: 32px;\r\n  height: 32px;\r\n}\r\n.post .userDetails .info {\r\n  width: 50%;\r\n}\r\n.post .userDetails .info .little {\r\n  font-size: 12px;\r\n  color: rgb(173, 173, 173);\r\n}\r\n.attention {\r\n  width: 30%;\r\n}\r\n.attention button {\r\n  width: 60px;\r\n  height: 30px;\r\n  border: 0px;\r\n  border-radius: 5px;\r\n  margin-top: 5px;\r\n  background-color: #2bb3ed;\r\n  transition: all 0.2s ease-in-out;\r\n  color: #fff;\r\n}\r\n.post .content {\r\n  padding: 0px 0px 10px 20px;\r\n}\r\n.postComment {\r\n  font-size: 16px;\r\n  margin-top: 10px;\r\n  width: 100%;\r\n  background-color: #fff;\r\n  padding-bottom: 60px;\r\n}\r\n.postComment .commentItem {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  padding: 15px 10px;\r\n}\r\n.postComment .commentItem .touxiang {\r\n  width: 10%;\r\n}\r\n.postComment .commentItem .touxiang .van-image {\r\n  width: 28px;\r\n  height: 28px;\r\n}\r\n.postComment .commentItem .comment {\r\n  width: 90%;\r\n}\r\n.postComment .commentItem .comment .info {\r\n  font-size: 14px;\r\n  color: rgb(187, 187, 187);\r\n}\r\n.postComment .commentItem .comment .txt {\r\n  margin-top: 5px;\r\n}\r\n.postComment .writeComment {\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 50px;\r\n  bottom: 0;\r\n  background-color: #fff;\r\n  border-top: 0.5px solid rgb(203, 203, 203);\r\n}\r\n.postComment .writeComment input {\r\n  width: 50%;\r\n  height: 20px;\r\n  font-size: 14px;\r\n  border: 0px;\r\n  background-color: rgb(231, 231, 231);\r\n  border-radius: 5px;\r\n  margin-left: 10px;\r\n  padding: 5px 10px 5px 10px;\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n}\r\n.postComment .writeComment .put {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 70%;\r\n  transform: translateX(-70%) translateY(-50%);\r\n}\r\n.postComment .writeComment .userLike {\r\n  width: 50px;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 90%;\r\n  transform: translateX(-90%) translateY(-50%);\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e5c8b826&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e5c8b826&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticStyle","attrs","postDetails","postNick","on","onClickLeft","scopedSlots","_u","key","fn","staticClass","_v","proxy","ref","_s","postDate","postReadcount","postContent","_l","commentList","comment","commentId","userNick","commentDate","commentContent","directives","name","rawName","value","MyComment","expression","domProps","$event","target","composing","putMyComment","postLike","staticRenderFns","data","computed","methods","onClickRight","console","tokenCheckout","res","putPostComment","userAccount","postId","date","reply","addComment","reason","getDate","hours","minutes","seconds","year","month","day","components","component"],"sourceRoot":""}