{"version":3,"file":"js/485.eb4317bd.js","mappings":"kJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,aAAa,IAAIC,GAAG,CAAC,aAAaN,EAAIO,eAAeL,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,IAAI,SAAW,GAAG,KAAO,WAAW,YAAc,WAAWG,MAAM,CAACC,MAAOT,EAAIU,QAASC,SAAS,SAAUC,GAAMZ,EAAIU,QAAQE,CAAG,EAAEC,WAAW,aAAaX,EAAG,MAAM,CAACE,YAAY,QAAQE,GAAG,CAAC,MAAQN,EAAIc,eAAe,CAAGd,EAAIe,MAA+Cf,EAAIgB,KAA5Cd,EAAG,MAAM,CAACA,EAAG,IAAI,CAACF,EAAIiB,GAAG,eAAyBjB,EAAIe,MAAOb,EAAG,MAAM,CAACF,EAAIiB,GAAG,KAAKjB,EAAIkB,GAAGlB,EAAIe,UAAUf,EAAIgB,KAAKd,EAAG,IAAI,CAACiB,YAAY,CAAC,MAAQ,SAAS,CAACnB,EAAIiB,GAAG,cAAcf,EAAG,SAAS,CAACI,GAAG,CAAC,MAAQN,EAAIoB,UAAU,CAACpB,EAAIiB,GAAG,UAAUf,EAAG,YAAY,CAACmB,MAAO,CAAEC,OAAQ,OAASjB,MAAM,CAAC,SAAW,UAAUG,MAAM,CAACC,MAAOT,EAAIuB,UAAWZ,SAAS,SAAUC,GAAMZ,EAAIuB,UAAUX,CAAG,EAAEC,WAAW,gBAAgB,EACt0B,EACIW,EAAkB,G,oBC8BtB,GACAC,KAAAA,UACAC,OACA,OACAhB,QAAAA,GACAK,WAAAA,EACAQ,WAAAA,EAEA,EACAI,SAAAA,KACA,6CAEAC,QAAAA,CACArB,cACA,mBACA,EACAO,eACA,iBACA,EACAM,UAEA,wBACA,0BAGA,uBACA,0BAEA,gBAGAS,EAAAA,EAAAA,IAAAA,KAAAA,OAAAA,MACAC,IACA,2BACAV,EAAAA,EAAAA,IAAAA,KAAAA,YAAAA,KAAAA,QAAAA,KAAAA,WAAAA,MACAU,IACA,cACA,4BAEA,sBACAL,KAAAA,cAGA,wBACA,GAGA,IAEAM,QAGA,EAEAC,UACA,IACA,2BACA,0BACA,uBACA,wBACA,0BACA,0BAEA,OACAC,EAAAA,IAAAA,GAEA,OACAC,EAAAA,IAAAA,GAEA,OACAC,EAAAA,IAAAA,GAGA,MACAC,EACA,IACAC,EACA,IACAC,EACA,IACAL,EACA,IACAC,EACA,IACAC,EACA,QACA,GAEAI,WAAAA,CAAAA,GCxHuQ,I,UCQnQC,GAAY,OACd,EACAzC,EACAyB,GACA,EACA,KACA,WACA,MAIF,EAAegB,EAAiB,O","sources":["webpack://app/./src/views/Home/PutPage/index.vue","webpack://app/src/views/Home/PutPage/index.vue","webpack://app/./src/views/Home/PutPage/index.vue?e9dc","webpack://app/./src/views/Home/PutPage/index.vue?b6da"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"putpage\"},[_c('van-nav-bar',{attrs:{\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_c('van-field',{attrs:{\"rows\":\"1\",\"autosize\":\"\",\"type\":\"textarea\",\"placeholder\":\"请输入您的话~\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}}),_c('div',{staticClass:\"topic\",on:{\"click\":_vm.showTopicFun}},[(!_vm.topic)?_c('div',[_c('p',[_vm._v(\"#  添加话题\")])]):_vm._e(),(_vm.topic)?_c('div',[_vm._v(\"# \"+_vm._s(_vm.topic))]):_vm._e(),_c('p',{staticStyle:{\"color\":\"#ccc\"}},[_vm._v(\"全部   >\")])]),_c('button',{on:{\"click\":_vm.putPost}},[_vm._v(\"发  布\")]),_c('van-popup',{style:({ height: '30%' }),attrs:{\"position\":\"bottom\"},model:{value:(_vm.showTopic),callback:function ($$v) {_vm.showTopic=$$v},expression:\"showTopic\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"putpage\">\r\n    <van-nav-bar left-arrow @click-left=\"onClickLeft\" />\r\n    <van-field\r\n      v-model=\"message\"\r\n      rows=\"1\"\r\n      autosize\r\n      type=\"textarea\"\r\n      placeholder=\"请输入您的话~\"\r\n    />\r\n    <!-- 话题 -->\r\n    <div class=\"topic\" @click=\"showTopicFun\">\r\n      <div v-if=\"!topic\">\r\n        <p># &nbsp;添加话题</p>\r\n      </div>\r\n      <div v-if=\"topic\">#&nbsp;{{ topic }}</div>\r\n      <p style=\"color: #ccc\">全部 &nbsp; ></p>\r\n    </div>\r\n    <button @click=\"putPost\">发&nbsp;&nbsp;布</button>\r\n\r\n    <!-- 话题弹出层 -->\r\n    <van-popup\r\n      v-model=\"showTopic\"\r\n      position=\"bottom\"\r\n      :style=\"{ height: '30%' }\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport { putPost, tokenCheckout } from \"@/api\";\r\nexport default {\r\n  name: \"PutPage\",\r\n  data() {\r\n    return {\r\n      message: \"\",\r\n      topic: undefined,\r\n      showTopic: false,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"token\", \"userAccount\", \"userNick\"]),\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n    showTopicFun() {\r\n      this.showTopic = true;\r\n    },\r\n    putPost() {\r\n      // 发帖，如果帖子字数少于10个不让发\r\n      if (this.message.length > 400) {\r\n        this.$toast(\"字数不得多于400!\");\r\n        return;\r\n      }\r\n      if (this.message.length < 10) {\r\n        this.$toast(\"至少写10个字吧!\");\r\n      } else {\r\n        this.getDate();\r\n        // 把写的内容和vuex中的token和userAccount一起发送到后端接口\r\n        // 先判断token是否过期\r\n        tokenCheckout(this.token).then(\r\n          (res) => {\r\n            if (res.static == \"tokenSuccess\") {\r\n              putPost(this.userAccount, this.message, this.getDate()).then(\r\n                (res) => {\r\n                  if (res=='success') {\r\n                    this.$toast.success(\"发布成功\");\r\n                    // 发布成功跳到首页\r\n                    this.$router.replace({\r\n                        name:'homepage'\r\n                    })\r\n                  }else{\r\n                    this.$toast.fail(\"发布失败\");\r\n                  }\r\n                }\r\n              );\r\n            }\r\n          },\r\n          (reason) => {}\r\n        );\r\n      }\r\n    },\r\n    // 获取当前时间\r\n    getDate() {\r\n      let _this = this;\r\n      let year = new Date().getFullYear(); //获取当前时间的年份\r\n      let month = new Date().getMonth() + 1; //获取当前时间的月份\r\n      let day = new Date().getDate(); //获取当前时间的天数\r\n      let hours = new Date().getHours(); //获取当前时间的小时\r\n      let minutes = new Date().getMinutes(); //获取当前时间的分数\r\n      let seconds = new Date().getSeconds(); //获取当前时间的秒数\r\n      //当小于 10 的是时候，在前面加 0\r\n      if (hours < 10) {\r\n        hours = \"0\" + hours;\r\n      }\r\n      if (minutes < 10) {\r\n        minutes = \"0\" + minutes;\r\n      }\r\n      if (seconds < 10) {\r\n        seconds = \"0\" + seconds;\r\n      }\r\n      //拼接格式化当前时间\r\n      let datetime =\r\n        year +\r\n        \"-\" +\r\n        month +\r\n        \"-\" +\r\n        day +\r\n        \" \" +\r\n        hours +\r\n        \":\" +\r\n        minutes +\r\n        \":\" +\r\n        seconds;\r\n      return datetime;\r\n    },\r\n  },\r\n  components: {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.van-nav-bar {\r\n  border-bottom: 0.5px solid rgb(203, 203, 203);\r\n}\r\n.van-field {\r\n  width: 100%;\r\n  padding-bottom: 40px;\r\n  font-size: 16px;\r\n}\r\n.topic {\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n  background-color: #fff;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 10px;\r\n}\r\n.putpage button {\r\n  width: 90%;\r\n  height: 40px;\r\n  font-size: 18px;\r\n  position: fixed;\r\n  bottom: 70px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background-color: #2bb3ed;\r\n  color: #fff;\r\n  border: 0px;\r\n  border-radius: 5px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=fc118a94&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=fc118a94&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fc118a94\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","onClickLeft","model","value","message","callback","$$v","expression","showTopicFun","topic","_e","_v","_s","staticStyle","putPost","style","height","showTopic","staticRenderFns","name","data","computed","methods","tokenCheckout","res","reason","getDate","hours","minutes","seconds","year","month","day","components","component"],"sourceRoot":""}